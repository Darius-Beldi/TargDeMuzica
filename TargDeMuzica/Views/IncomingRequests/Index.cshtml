@model IEnumerable<TargDeMuzica.Models.IncomingRequest>

@{
    ViewData["Title"] = "Pending Product Requests";
}

<h2>Pending Product Requests</h2>

@if (TempData["message"] != null)
{
    <div class="alert alert-success">@TempData["message"]</div>
}

<div class="container">
    @foreach (var request in Model)
    {
        <div class="card mb-3">
            <div class="card-header">
                <h5>Request from @request.User.UserName - @request.RequestDate.ToString("MM/dd/yyyy HH:mm")</h5>
            </div>
            <div class="card-body">
                <h6>Product Details:</h6>
                <dl class="row">
                    <dt class="col-sm-2">Name</dt>
                    <dd class="col-sm-10">@request.ProposedProduct.ProductName</dd>

                    <dt class="col-sm-2">Description</dt>
                    <dd class="col-sm-10">@request.ProposedProduct.ProductDescription</dd>

                    <dt class="col-sm-2">Price</dt>
                    <dd class="col-sm-10">@request.ProposedProduct.ProductPrice.ToString("C")</dd>

                    <dt class="col-sm-2">Stock</dt>
                    <dd class="col-sm-10">@request.ProposedProduct.ProductStock</dd>
                </dl>

                <form asp-action="Review" method="post" class="mt-3">
                    <input type="hidden" name="requestId" value="@request.RequestID" />

                    <div class="form-group">
                        <label for="comment">Admin Comment:</label>
                        <textarea name="comment" class="form-control" rows="2"></textarea>
                    </div>

                    <div class="btn-group mt-3">
                        <button type="submit" name="approved" value="true" class="btn btn-success">
                            Approve
                        </button>
                        <button type="submit" name="approved" value="false" class="btn btn-danger">
                            Reject
                        </button>
                    </div>
                </form>
            </div>
        </div>
    }
</div>